# 第二章 开票

本章我们将了解如何给客户和供应商开具发票，处理支付条款等。

## 客户发票

首先，我们在做一个销售订单：

![15](./images/AC15.png)

我们在确定订单后开票，发票中生成的会计科目是由产品的设置决定的。具体来说是由产品属性、产品分类属性和日记帐中的设置决定的。

![16](./images/AC16.png)

在产品设置的会计属性中有两个设置，收入科目和费用科目。如果产品设置中的科目为空，那么系统将根据**产品分类**的属性中进行设置。如果产品分类中的科目设置也为空，那么系统将根据**日记账**的科目设置进行设置。

### 产品开票策略

我们在销售相关章节中也提到过，销售的开票策略由产品的开票策略决定。如果产品开票策略设置为**根据订单数量**， 那么系统允许不发货进行开票。如果开票策略设置为**根据发货数量**，那么系统将要求再发货完成后进行开票。

在销售明细中，如果订单行为绿色文字表明改行可以进行开票，反之则表明不能开票。

### 注释

我们可以在明细行中添加文字块和备注，文字块和备注将根据最近的一条产品明细一同带入到发票行中。


## 退票

如果我们在业务中需要给客户进行退款，那么首先我们就需要给客户创建一个**退款发票(Credit Note)**。步骤是找到已经开具的发票，然后单击退款按钮。

![17](./images/AC17.png)

确认生成的退款发票：

![18](./images/AC18.png)

然后完成退款的支付即可。

### 使用与INV不同的序号

在日记帐中有一个设置可以让我们在创建退款发票时使用与客户发票不同的序列号：

![20](./images/AC20.png)

> 关于客户发票的序号机制，请参考CookBook客户发票一章。


### 部分退款

在odoo16.0及之前的版本中，退款支持部分退款。

![22](./images/AC22.png)

但17.0中已经移除部分退款，仅支持全部退款。

![23](./images/AC23.png)


## 使用OCR识别发票

Odoo可以通过扫描将收到的发票上传到系统中，支持多个发票一同上传，并自动切割，还可以将不同的发票文件自动生成发票。

![24](./images/AC24.png)

要使用OCR功能，我们首先需要在设置-会计-数字化设置中打开OCR功能。

![25](./images/AC25.png)

借助文档功能，我们可以将一个多个发票在一起的文件分割成多个独立的发票。

然后再点击生成采购账单按钮自动生成采购账单。

## 供应商发票

供应商发票和客户发票操作类似，只不过方向相反。我们可以通过OCR功能，上传一个供应商发的PDF，odoo会自动帮我们创建供应商发票。

![26](./images/AC26.png)

### git