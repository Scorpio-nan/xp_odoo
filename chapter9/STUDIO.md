# 大话Odoo Studio

Odoo Studio是Odoo官方推出的UI类工具，不懂代码的用户借助其强大的功能，方便地对Odoo进行自己的改造。Odoo在官方网站上对其进行的宣传语是：

```sh
With Odoo Studio you're in control, no programming knowledge needed. Add fields, create new views, and streamline workflows - all with ease. 
The sky is the limit!
```

由此可见，Odoo认为Studio是用户强大的工具。饼画得很好，然而事实真的如官方说的那样么？马克思辩证法告诉我们任何事物都有其两面性，今天我们就来聊一下Studio的优势和官方不会告诉你的Studio的缺点，以供大家在使用的时候避免踩坑。

## Studio的优势

本着欲抑先扬的客户态度，我们首先来看一下Studio的优势。

### 自定义字段和视图

正如官方所说的那样，用户借助Studio可以在任意界面点击右上角的扳手图标，进入Studio模式，然后添加自己想要的字段和视图。

确实，对于使用标准版Odoo的客户来说，Studio确实提供了便捷性，不必求开发人员就可以进行修改。

### 报表修改

Odoo官方的报表样式只提供了有限的几种，每张报表的内容和布局也并非每个客户都愿意接受。因此，这个时候，使用Studio就可以对部分报表的样式进行修改。这个也确实满足了一部分用户的需求。

## Studio的局限性

好了，说完了优势，下面我们来看看Studio的局限。

### 字段命名问题

首先，我们在使用Studio添加字段时，系统会强制我们把字段的命名为x_开头的字段，以跟代码定义的字段进行区分。这样做的效果就会造成我们使用了大量的x_开始的字段，对于有强迫症的程序员来说，后期维护非难难受。

### 依赖性问题

Studio存在的一个巨大的问题就是生成的模块并不会有清晰明确的依赖关系，这就造成了我们在升级某些原生模块的时候会碰到莫名其妙的问题。

### 修改持久化问题

Studio虽然会在模块列表中生成一个名为Studio_Customization的模块，但是此模块并不会保存在磁盘上而是存储在数据库中。一旦用户卸载此模块，那么所有的改动将无法找回。

### Studio一时爽 升级火葬场

我们知道使用SAAS版本的Odoo可以在后台直接点击升级，将低版本的odoo升级到最新版本。但是如果你用到了Studio，那么我们强烈建议你先使用测试库进行升级后的测试在进行生产版本的升级。

我们最近碰到的一个惨痛的例子就是客户使用的是SAAS版本17.4版本的odoo，我们在升级到18.0之后，发现很多在17.4使用Studio的修改在18.0中都不翼而飞了，甚至还出现了很多莫名其妙的报错。

后来排查原因才知道，odoo官方在升级过程中**并不会考虑Studio进行的修改**，也就是说使用Studio生成的修改会被认作是第三方模块需要用户自行解决适配性问题。问题是使用SAAS版本，又使用Studio的用户多半是技术小白，他们怎么会有能力自行解决这种问题。

这里举一个典型的列子，在17.0版本中，报表显示税率是使用的变量是tax_totals，在报表中使用了formatted_amount变量来显示格式化的金额，然而在18.0中，官方对此功能进行重构，formatted_amount不复存在，由于客户使用了大量的Studio继承修改，升级后大面积报错。

没办法，我们只能一个视图一个视图地进行检查，一个变量一个变量地进行修改。

## Studio的适用场景

总而言之，官方推出这样的工具肯定是出于多方面考虑，一方面想要降低用户的使用成本，一方面也可能想要留住SAAS用户(碰到问题可以请求官方或合作伙伴帮助哦)，但是我们基于上面的几点原因，不推荐客户在生产环境中使用。用户可以把它当作需求的制作工具，在与技术人员沟通时提供一个清晰的需求原型。